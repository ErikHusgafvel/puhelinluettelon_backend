(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),u=t(1),r=t(14),i=t.n(r),a=(t(20),t(3)),o=function(e){var n=e.person,t=e.handleDelete;return Object(c.jsxs)("div",{children:[n.name," ",n.number," ",Object(c.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},s=function(e){var n=e.persons,t=e.handleDelete;return n.map((function(e){return Object(c.jsx)(o,{person:e,handleDelete:t},e.name)}))},l=function(e){return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{onChange:e.filterChange})]})},d=function(e){return Object(c.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleChange})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNoChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},f=t(4),j=t.n(f),h="/api/persons",b=function(){return j.a.get(h).then((function(e){return e.data}))},m=function(e){return j.a.post(h,e).then((function(e){return e.data}))},O=function(e,n){return j.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(h,"/").concat(e))},x=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"success",children:n})},v=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})},g=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],i=Object(u.useState)(""),o=Object(a.a)(i,2),f=o[0],j=o[1],h=Object(u.useState)(""),g=Object(a.a)(h,2),w=g[0],C=g[1],N=Object(u.useState)(t),S=Object(a.a)(N,2),D=S[0],k=S[1],T=Object(u.useState)(null),y=Object(a.a)(T,2),I=y[0],E=y[1],J=Object(u.useState)(null),L=Object(a.a)(J,2),A=L[0],B=L[1];Object(u.useEffect)((function(){b().then((function(e){r(e),k(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,{message:A}),Object(c.jsx)(x,{message:I}),Object(c.jsx)(l,{filterChange:function(e){k(t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())})))}}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(d,{handleSubmit:function(e){e.preventDefault();var n={name:f,number:w};if(-1===t.findIndex((function(e){return e.name===f})))m(n).then((function(e){r(t.concat(e)),j(""),C(""),k(D.concat(e)),E("Added ".concat(f)),setTimeout((function(){E(null)}),2e3)})).catch((function(e){console.log(e.response.data),B(e.response.data.error),setTimeout((function(){B(null)}),5e3),j(""),C("")}));else if(window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))){var c=t.find((function(e){return e.name===f}));O(c.id,n).then((function(e){r(t.map((function(n){return n.id===c.id?e:n}))),k(D.map((function(n){return n.id===c.id?e:n}))),E("Updated ".concat(f)),setTimeout((function(){E(null)}),2e3)})).catch((function(e){B("Information of '".concat(f,"' has already been removed from server")),setTimeout((function(){B(null)}),5e3),r(t.filter((function(e){return e.id!==c.id}))),k(D.filter((function(e){return e.id!==c.id})))}))}},handleChange:function(e){j(e.target.value)},handleNoChange:function(e){C(e.target.value)},newName:f,newNumber:w}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(s,{persons:D,handleDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&p(e.id).then((function(n){r(t.filter((function(n){return n.id!==e.id}))),k(D.filter((function(n){return n.id!==e.id}))),E("Deleted ".concat(e.name)),setTimeout((function(){E(null)}),2e3)}))}})]})};i.a.render(Object(c.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.00364cab.chunk.js.map